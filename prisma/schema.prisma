generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model users {
  id          Int           @id @default(autoincrement())
  username    String
  email       String        @db.Text
  password    String        @db.Text
  description String?       @db.Text
  image       String?       @default("https://static.thenounproject.com/png/5034901-200.png") @db.VarChar(255)
  stock       stock[]
  ingredients ingredients[]
  recipes     recipes[]
}

enum TypeFood {
  verdura
  fruta
  carne
  lacteo
  secos
}

model stock {
  id        Int      @id @default(autoincrement())
  name_food String   @db.Text
  quantity  Int
  unit      String   @db.Text
  type_food TypeFood
  user_id   Int
  user      users    @relation(fields: [user_id], references: [id])
}

model ingredients {
  id                  Int                   @id @default(autoincrement())
  name                String                @db.Text
  unit                String                @db.Text
  users               users?                @relation(fields: [usersId], references: [id])
  usersId             Int?
  recipes_ingredients recipes_ingredients[]
}

model recipes {
  id                   Int                   @id @default(autoincrement())
  name                 String                @db.Text
  description          String                @db.Text
  ingredients          String                @db.Text
  instructions         String                @db.Text
  userId               Int?
  user                 users?                @relation(fields: [userId], references: [id])
  recipes_favourites   favourites[]
  recetas_ingredientes recipes_ingredients[]
  recipes_user         recipes_user[]
}

model recipes_ingredients {
  id             Int         @id @default(autoincrement())
  recipes_id     Int
  ingredients_id Int
  recipe         recipes     @relation(fields: [recipes_id], references: [id])
  ingredient     ingredients @relation(fields: [ingredients_id], references: [id])
}

model favourites {
  id         Int     @id @default(autoincrement())
  recipes_id Int
  user_id    Int
  recipes    recipes @relation(fields: [recipes_id], references: [id])
}

enum Dates {
  lunes
  martes
  miercoles
  jueves
  viernes
}

model recipes_user {
  id        Int     @id @default(autoincrement())
  recipe_id Int
  user_id   Int
  Date      Dates
  recipe    recipes @relation(fields: [recipe_id], references: [id])
}
